<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>
        <link rel="stylesheet" href="style.css"/>
    </head>
    <body>
		<p>Welcome to cobalt hello world ! Please use a pull-to-refresh gesture to change the message below. If it works, then you are ready to build your first app :)</p>
    	<p id="hello">Pull to refresh :)</p>

        <script type="text/javascript" src="zepto.js"></script>
        <script type="text/javascript" src="../platform/cobalt.js"></script>
        
        <script>
            Zepto(function($){
				
                cobalt.init({
                    debug:true,
                    //debugInBrowser:true,
                    events:{
                        "pullToRefresh" : function(data,callback){
                            cobalt.log('Refresh asked...');
                            pleaseRefresh(callback);
                        }
                    }
                });				
                
            });			
			
			var messages=["Hello!","Yes it works!","Bonjour !","guten Tag!","Ola !"],
				i = 0, 
			    len = messages.length,
				hello = $('#hello');
			
			function pleaseRefresh( callback ){
				cobalt.log('refreshing content')
	            hello.html( messages[i++] );
				if (i >= len) { i = 0 };//loop over messages
				
				//say the native side we finished refreshing
				/*
	            var hellos=new Array("Hello!","Bonjour !","guten Tag !","Ola !");
	            var randomitem = hellos[ Math.floor( Math.random() * hellos.length )];
	            $('p').html(randomitem);
				*/
				if (callback){
					cobalt.sendCallback(callback)
				}
			}
            
        </script>
    </body>
</html>
