<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>
        <link rel="stylesheet" href="style.css"/>
    </head>
    <body>
       <p id="content">Pull to refresh :)</p>

        <script type="text/javascript" src="zepto.js"></script>
        <script type="text/javascript" src="../platform/cobalt.js"></script>
        
        <script>
            Zepto(function($){
				
                cobalt.init({
                    debug:true,
                    debugInBrowser:true,
                    events:{
                        "pullToRefresh" : function(data,callback){
                            cobalt.log('Refresh asked...');
                            pleaseRefresh(callback);                           
                        }
                    }
                });				
                
            });			
			
			var messages=["Hello!","Bonjour !","guten Tag!","Ola !"],
				i = 0, 
			    len = messages.length,
				content = $('#content');
			
			function pleaseRefresh( callback ){
				cobalt.log('refreshing content')
	            content.html( messages[i++] );
				if (i >= len) { i = 0 };//loop over messages
				
				//say the native side we finished refreshing
				if (callback){
					cobalt.sendCallback(callback)
				}
			}
            
        </script>
    </body>
</html>
