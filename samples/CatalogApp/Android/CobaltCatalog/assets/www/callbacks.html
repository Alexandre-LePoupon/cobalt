<!DOCTYPE html>
<html>
    <head>
			<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
			<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>
	        <link rel="stylesheet" type="text/css" href="css/styles.css"/>	        
    </head>
    <body>
  		
  		<a href="javascript:;" class="pop">POP</a><br/>
  		
  		<p>This page shows examples of events with callbacks. <br/>
           Events are sent form one side to the other and are coming back with a result.</p>

        <p><b>From web to native and comming back :</b></p>

        <p>Button bellow should send an event to the native side to ask how many does 1 + 3. Native should do the math and send result. Web shows the result below :</p>
        <input id="button_1" type="button" value="do some maths"/><br/>
        <div id="result_1" class="expected">Result is : <span></span></div>


        <p><b>From native to web and comming back :</b></p>

        <p>Button "do some maths" in the bottom bar should send an event to the web side to ask how many does 1 + 3. Web is good at maths too and should send the result. Native shows the result in an alert</p>

        <script type="text/javascript" src="js/zepto.min.js"></script>
        <script type="text/javascript" src="js/cobalt/cobalt.js"></script>
          <script type="text/javascript" src="js/app.js"></script>

        <script>
            
            Zepto(function($){

	            cobalt.init({
                    debug:app.debug,
                    debugInBrowser:app.debugInBrowser,
                    debugInLogdiv:app.debugInLogdiv,

		            events:{
			            "addValues": function(data, callback){
				            cobalt.log('executing addValues with data.values = ',data.values)
                            if (data.values && data.values.length){
                                cobalt.sendCallback(callback,{ result : (parseInt(data.values[0]) + parseInt(data.values[1]))} )
                            }else{
                                app.log('error : no values received in data.values')
                            }
			            }
		            }
	            });

                app.touch('#button_1',function(){
                    cobalt.sendEvent("addValues", { values : [1, 3] },function(data){
                        $('#result_1 span').html(data.result)
                    });
                });

                app.touch('a.pop',function(){
                    cobalt.navigate('pop');
                });

            })
            

        </script>
        
    </body>
</html>