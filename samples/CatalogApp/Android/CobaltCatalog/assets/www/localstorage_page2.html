<!DOCTYPE html>
<html>
    <head>
			<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
			<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>
	        <link rel="stylesheet" type="text/css" href="css/styles.css"/>	        
    </head>
    <body class="green">
  		
  		<a href="javascript:;" class="pop">POP</a><br/>


        <p>2nd page of LocalStorage</p>

		<p>Check if your value is still here.</p>

  		<a id="retrieve">Retrieve</a><br/>

		<p>Change the value and get back to the other page</p>

		<a id="store">Store 'changed'</a><br/>
		<a id="clean">Clean all values</a><br/>


		<p>You can also re-push the previous page for further testing.</p>

		<li><a class="push" href="javascript:;" data-href="localstorage.html">push first page</a></li>


        <script type="text/javascript" src="js/zepto.min.js"></script>
        <script type="text/javascript" src="js/cobalt/cobalt.js"></script>
        <script type="text/javascript" src="js/app.js"></script>



        <script>
            
            Zepto(function($){

	            cobalt.init({
                    debug:app.debug,
                    debugInBrowser:app.debugInBrowser,
                    debugInLogdiv:app.debugInLogdiv
	            });

               	cobalt.log("init dismissInformations : "+cobalt.storage.getItem("dismissInformations"));
				cobalt.log("init testLocalStorageKey : "+cobalt.storage.getItem("testLocalStorageKey"));
                


                app.touch('a.pop',function(){
                    cobalt.navigate('pop');
                });

                app.touch('a.push',function(){
	            	cobalt.navigate('push',$(this).attr('data-href'),$(this).attr('data-classid'))
	            });

                app.touch('a#store',function(){
                    var obj={ value: "changed"}
                    cobalt.log("Changing value to", obj)
                    cobalt.storage.setItem('testLocalStorageKey',obj, "json")
                });

                app.touch('a#retrieve',function(){
                    var keyvalue=cobalt.storage.getItem('testLocalStorageKey',"json")
                    if (keyvalue){
                        if (keyvalue.value){
                            cobalt.log("value key of 'testLocalStorageKey' contains : "+ keyvalue.value)
                        }
                        else{
                            cobalt.log("value key of 'testLocalStorageKey' is not set.")
                        }
                    }else{
                        cobalt.log("key 'testLocalStorageKey' is not set")
                    }
                });

                app.touch('a#clean',function(){
                    cobalt.log("Cleaning local storage.")
                    cobalt.storage.clear();
                });

            })
            

        </script>
        
    </body>
</html>